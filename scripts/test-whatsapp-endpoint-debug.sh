#!/bin/bash

echo "🔍 Debugando endpoint WhatsApp Business..."

echo ""
echo "📋 Possíveis causas do erro:"
echo "   1. Usuário não tem contas WhatsApp Business"
echo "   2. Permissões insuficientes"
echo "   3. Endpoint incorreto"
echo "   4. Token inválido"
echo ""

echo "🔧 Soluções para testar:"
echo "   1. Verificar se o usuário tem WhatsApp Business configurado"
echo "   2. Testar com diferentes endpoints"
echo "   3. Verificar permissões do token"
echo ""

echo "📱 Próximos passos:"
echo "   1. Acesse: https://localhost/"
echo "   2. Vá para WhatsApp Credentials"
echo "   3. Clique em 'Conectar com Meta'"
echo "   4. Verifique os logs do backend"
echo ""

echo "🔍 Logs importantes para verificar:"
echo "   - [META-AUTH] ID do usuário obtido: {userId}"
echo "   - [META-AUTH] Dados da conta WhatsApp Business obtidos com sucesso"
echo "   - [META-AUTH] Erro ao buscar conta WhatsApp Business"
echo ""

echo "💡 Se o erro persistir, pode ser que:"
echo "   - O usuário não tenha WhatsApp Business configurado"
echo "   - Precise configurar WhatsApp Business primeiro"
echo "   - Precise de permissões adicionais"
echo ""

echo "✅ Teste novamente e verifique os logs!"


