<!-- Página de perfil do usuário -->
<div class="container mt-4">
  <div class="row">
    <div class="col-md-3">
      <!-- Menu lateral -->
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">Meu Perfil</h5>
        </div>
        <div class="list-group list-group-flush">
          <a href="/profile" class="list-group-item list-group-item-action active">
            <i class="fas fa-user me-2"></i> Informações Pessoais
          </a>
          <a href="/profile/settings" class="list-group-item list-group-item-action">
            <i class="fas fa-cog me-2"></i> Configurações
          </a>
          <a href="/profile/security" class="list-group-item list-group-item-action">
            <i class="fas fa-lock me-2"></i> Segurança
          </a>
          <a href="/profile/notifications" class="list-group-item list-group-item-action">
            <i class="fas fa-bell me-2"></i> Notificações
          </a>
        </div>
      </div>
    </div>

    <div class="col-md-9">
      <!-- Conteúdo principal -->
      <div class="card">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Informações Pessoais</h5>
          <a href="/profile/edit" class="btn btn-light btn-sm">
            <i class="fas fa-edit me-1"></i> Editar
          </a>
        </div>
        <div class="card-body">
          <% if (messages.success && messages.success.length > 0) { %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
              <%= messages.success %>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          <% } %>
          
          <% if (messages.error && messages.error.length > 0) { %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <%= messages.error %>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          <% } %>

          <div class="row mb-4">
            <div class="col-md-3 text-center">
              <div class="avatar-container mb-3">
                <% if (user.profile && user.profile.avatar_url) { %>
                  <img src="<%= user.profile.avatar_url %>" alt="Avatar do usuário" class="img-fluid rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
                <% } else { %>
                  <div class="avatar-placeholder rounded-circle d-flex align-items-center justify-content-center bg-secondary text-white" style="width: 100px; height: 100px; font-size: 2rem; margin: 0 auto;">
                    <%= user.displayName ? user.displayName.charAt(0).toUpperCase() : 'U' %>
                  </div>
                <% } %>
              </div>
            </div>
            
            <div class="col-md-9">
              <h4><%= user.displayName || 'Usuário' %></h4>
              <p class="text-muted"><%= user.email %></p>
              
              <% if (user.user_metadata && user.user_metadata.role) { %>
                <p><strong>Cargo:</strong> <%= user.user_metadata.role %></p>
              <% } %>
              
              <% if (user.created_at) { %>
                <p><strong>Membro desde:</strong> <%= new Date(user.created_at).toLocaleDateString('pt-BR') %></p>
              <% } %>
            </div>
          </div>
          
          <hr>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <h5>Informações de Contato</h5>
              <ul class="list-unstyled">
                <li class="mb-2">
                  <strong>Email:</strong> <%= user.email %>
                </li>
                <li class="mb-2">
                  <strong>Telefone:</strong> 
                  <%= (user.profile && user.profile.phone) ? user.profile.phone : 'Não informado' %>
                </li>
              </ul>
            </div>
            
            <div class="col-md-6 mb-3">
              <h5>Detalhes Pessoais</h5>
              <ul class="list-unstyled">
                <li class="mb-2">
                  <strong>Nome Completo:</strong> 
                  <%= (user.profile && user.profile.full_name) ? user.profile.full_name : 
                     ((user.profile && user.profile.first_name && user.profile.last_name) ? 
                      `${user.profile.first_name} ${user.profile.last_name}` : 'Não informado') %>
                </li>
                <li class="mb-2">
                  <strong>Localização:</strong>
                  <%= (user.profile && user.profile.location) ? user.profile.location : 'Não informado' %>
                </li>
                <li class="mb-2">
                  <strong>Empresa:</strong>
                  <%= (user.profile && user.profile.company) ? user.profile.company : 'Não informado' %>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 